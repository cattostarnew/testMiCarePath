<!DOCTYPE html>

<html>
<title>MiCarePath Video Watching</title>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://www.youtube.com/iframe_api"></script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NCMSMZQ');</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WQYKMC2PK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-7WQYKMC2PK');
//gtag('config', 'G-7WQYKMC2PK', {
//'user_id': "zzz"
// });
  //dataLayer.push({'user_id': 'xyzzz'});
</script>
<!-- <script src = "https://www.youtube.com/iframe_api"> </script> -->
<style>
  h1 {
    color: black;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 200%;
    
  }
  p {
    color: black;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 200%;
  }
  label {
    color: black;
    font-family: Arial;
    font-size: 4vw;
  }
  select {
    color: black;
    font-family: Arial;
    font-size: 4vw;
  }
  </style>
  <style type = "text/css">
    .d-none{
      display: none;
    }
  </style>
</head>
<body style="background-color:beige;"> 
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NCMSMZQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

<h1> Build resilience by practicing your relaxation skills. &#128512 </h1>

<label for="cars" style="font-size:4vw" > Try a different video or breathing pacer:</label>
<select name="cars" style="font-size:4vw" id="cars" onchange="myFunction(this)">
  <option>--Select one option--</option>
  <option value="beach">Seaside</option>
  <option value="garden">Garden</option>
  <option value="generic">Generic</option>
  <option value="mountain">Mountain</option>
  <option value="breathing">Diaphragmatic Breathing</option>
  <option value="pacer">Breathing Pacer</option>
</select>

<select id="breath" onchange="breathChange(this)" class ="d-none">
  <option>--Choose your breaching pace--</option>
  <option value="5">5 breathes per minute</option>
  <option value="6">6 breathes per minute</option>
  <option value="7">7 breathes per minute</option>
  <option value="8">8 breathes per minute</option>
  <option value="9">9 breathes per minute</option>
</select>

<p> Change to full screen for a better experience. </p>


<div class="player-wrapper">
    <div class="player">
        <iframe id="myIframe" width="400" height="225" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen enablejsapi="true"></iframe>
         <!-- <iframe id="myIframe" width="400" height="225" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen enablejsapi="true" src="https://www.youtube.com/embed/AiAKJcvvC30?autoplay=0&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0"></iframe>  -->
    </div>
<!-- <div id="myIframe" class="embed-responsive-item video-frame" width="400" height="225" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen enablejsapi="true" src="https://www.youtube.com/embed/O2qnKaR9M2Q?autoplay=0&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&origin=https://cattostarnew.github.io/testMiCarePath/"></div> -->
<!-- <div id="myIframe" class="embed-responsive-item video-frame" width="400" height="225" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen enablejsapi="true"></div> -->

</div>

<!-- <video id="myIframe" controls width="250">

    <source src="https://www.youtube.com/embed/O2qnKaR9M2Q?autoplay=0&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&origin=https://cattostarnew.github.io/testMiCarePath/"
         >

</video> -->

<script>
    let params = new URLSearchParams(window.location.search)
    let selected_video = params.get('video')//count for a web view?
    let userinfo = params.get("user")
    console.log(selected_video)
    console.log(userinfo)
    //post user info to the datalayer
    //dataLayer.push({'user_id': userinfo})
    let myIframe = document.getElementById("myIframe")
    change(selected_video)

    // function prepareFrame() {
    //     var ifrm = document.createElement("iframe");
    //     ifrm.setAttribute("src", "http://google.com/");
    //     ifrm.style.width = "640px";
    //     ifrm.style.height = "480px";
    //     document.body.appendChild(ifrm);
    // }


    function change(video){
        switch(video){
            case "garden":
                console.log("garden")
                myIframe.src = "https://www.youtube.com/embed/O2qnKaR9M2Q?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //onYouTubeIframeAPIReady()
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                break

            case "beach":
                console.log("beach")
                myIframe.src = "https://www.youtube.com/embed/I96lFEmgQP0?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                break

            case "mountain":
                console.log("mountain")
                myIframe.src = "https://www.youtube.com/embed/AiAKJcvvC30?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                break

            case "generic":
                myIframe.src = "https://www.youtube.com/embed/ncDjdooEmbo?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                break

            case "breathing":
                myIframe.src = "https://www.youtube.com/embed/eGBEw1diK5s?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break

            case "5":

                myIframe.src = "https://www.youtube.com/embed/wEqIMIb-gRg?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break

            case "6":

                myIframe.src = "https://www.youtube.com/embed/f4gBu_uHSA0?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break

            case "7":

                myIframe.src = "https://www.youtube.com/embed/xpRwr_mHB08?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break

            case "8":

                myIframe.src = "https://www.youtube.com/embed/1u_94RLrMNo?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break

            case "9":
              
                myIframe.src = "https://www.youtube.com/embed/10xtQj8VGKw?autoplay=1&playsinline=1&modestbranding=1&cc_load_policy=1&rel=0&enablejsapi=1"
                //document.getElementById('myIframe').contentDocument.location.reload(true)
                //<iframe width="933" height="525" src="https://www.youtube.com/embed/eGBEw1diK5s" title="Diaphragmatic Breathing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                break
            }

    }

    function myFunction(getOption){
        var value = getOption.value;  
        console.log(value);
        if(value == "pacer"){
        document.getElementById("breath").classList.remove("d-none");
    }
    else {
        document.getElementById("breath").classList.add("d-none");
        change(value);
         }
    };

    function breathChange(getOption){
      var value = getOption.value; 
      var option = document.getElementById("cars").value;
      if(value != null && option == "pacer"){
        change(value)
      }
    }

    document.addEventListener("click", function(event){
        console.log(event);
    });
    //this did not track iframe component
       
</script>



<script type="text/javascript">
    var tag = document.createElement('script');
    tag.id = 'iframe-demo';
    tag.src = 'https://www.youtube.com/iframe_api';
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  
    var player;
    function onYouTubeIframeAPIReady() {
      player = new YT.Player("myIframe", {
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
      });
      console.log("ready");
    }
    function onPlayerReady(event) {
      document.getElementById('myIframe').style.borderColor = '#FF6D00';
      console.log("playerReady");
    }
    function changeBorderColor(playerStatus) {
      console.log(playerStatus);
      var color;
      if (playerStatus == -1) {
        color = "#37474F"; // unstarted = gray
      } else if (playerStatus == 0) {
        color = "#FFFF00"; // ended = yellow
      } else if (playerStatus == 1) {
        color = "#33691E"; // playing = green
      } else if (playerStatus == 2) {
        color = "#DD2C00"; // paused = red
      } else if (playerStatus == 3) {
        color = "#AA00FF"; // buffering = purple
      } else if (playerStatus == 5) {
        color = "#FF6DOO"; // video cued = orange
      }
      if (color) {
        document.getElementById('myIframe').style.borderColor = color;
      }
    }
    function onPlayerStateChange(event) {
      changeBorderColor(event.data);
      console.log(event.data);
    }

    function reload() {
                document.getElementById('myIframe').src += '';
            }
  </script>




</body>
</html>
